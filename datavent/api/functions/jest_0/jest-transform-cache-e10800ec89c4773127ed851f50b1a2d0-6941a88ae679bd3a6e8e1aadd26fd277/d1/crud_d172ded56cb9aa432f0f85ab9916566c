b364b0eeb2b7a20f085286e8fea77141


// CRUD
// -------------------------------------------->

module.exports = {

    list: function (db, collection, query) {
        db.collection(collection).get().then(querySnapshot => {
            const items = [];
            querySnapshot.forEach(doc => {
                console.log(`${doc.id} => ${doc.data()}`);
                items.push(doc.data());
            });
            return items;
        });
    },

    create: function (db, collection, data) {
        db.collection(collection).add(data).then(function (docRef) {
            console.log("Document written with ID: ", docRef.id);
        }).catch(function (error) {
            console.error("Error adding document: ", error);
        });
    },

    read: function (db, collection, doc) {
        db.collection(collection).doc(doc).get().then(function (doc) {
            if (doc.exists) {
                console.log("Document data:", doc.data());
            } else {
                console.log("No such document!");
            }
        }).catch(function (error) {
            console.log("Error getting document:", error);
        });
    },

    update: function (db, collection, doc, data) {
        var sfDocRef = db.collection(collection).doc(doc);
        return db.runTransaction(function (transaction) {
            return transaction.get(sfDocRef).then(function (sfDoc) {
                if (!sfDoc.exists) {
                    throw "Document does not exist!";
                }
                transaction.update(sfDocRef, data);
            });
        }).then(function () {
            console.log("Transaction successfully committed!");
        }).catch(function (error) {
            console.log("Transaction failed: ", error);
        });
    },

    remove: function (db, collection, doc) {
        db.collection(collection).doc(doc).delete().then(function () {
            console.log("Document successfully deleted!");
        }).catch(function (error) {
            console.error("Error removing document: ", error);
        });
    }

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNydWQuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsImxpc3QiLCJkYiIsImNvbGxlY3Rpb24iLCJxdWVyeSIsImdldCIsInRoZW4iLCJxdWVyeVNuYXBzaG90IiwiaXRlbXMiLCJmb3JFYWNoIiwiZG9jIiwiY29uc29sZSIsImxvZyIsImlkIiwiZGF0YSIsInB1c2giLCJjcmVhdGUiLCJhZGQiLCJkb2NSZWYiLCJjYXRjaCIsImVycm9yIiwicmVhZCIsImV4aXN0cyIsInVwZGF0ZSIsInNmRG9jUmVmIiwicnVuVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbiIsInNmRG9jIiwicmVtb3ZlIiwiZGVsZXRlIl0sIm1hcHBpbmdzIjoiOztBQUVBO0FBQ0E7O0FBRUFBLE9BQU9DLE9BQVAsR0FBaUI7O0FBRWJDLFVBQU0sVUFBU0MsRUFBVCxFQUFhQyxVQUFiLEVBQXlCQyxLQUF6QixFQUFnQztBQUNsQ0YsV0FBR0MsVUFBSCxDQUFjQSxVQUFkLEVBQTBCRSxHQUExQixHQUNLQyxJQURMLENBQ1dDLGFBQUQsSUFBbUI7QUFDckIsa0JBQU1DLFFBQVEsRUFBZDtBQUNBRCwwQkFBY0UsT0FBZCxDQUF1QkMsR0FBRCxJQUFTO0FBQzNCQyx3QkFBUUMsR0FBUixDQUFhLEdBQUVGLElBQUlHLEVBQUcsT0FBTUgsSUFBSUksSUFBSixFQUFXLEVBQXZDO0FBQ0FOLHNCQUFNTyxJQUFOLENBQVdMLElBQUlJLElBQUosRUFBWDtBQUNILGFBSEQ7QUFJQSxtQkFBT04sS0FBUDtBQUNILFNBUkw7QUFTSCxLQVpZOztBQWNiUSxZQUFRLFVBQVNkLEVBQVQsRUFBYUMsVUFBYixFQUF5QlcsSUFBekIsRUFBOEI7QUFDbENaLFdBQUdDLFVBQUgsQ0FBY0EsVUFBZCxFQUEwQmMsR0FBMUIsQ0FBOEJILElBQTlCLEVBQ0tSLElBREwsQ0FDVSxVQUFTWSxNQUFULEVBQWlCO0FBQ25CUCxvQkFBUUMsR0FBUixDQUFZLDRCQUFaLEVBQTBDTSxPQUFPTCxFQUFqRDtBQUNILFNBSEwsRUFJS00sS0FKTCxDQUlXLFVBQVNDLEtBQVQsRUFBZ0I7QUFDbkJULG9CQUFRUyxLQUFSLENBQWMseUJBQWQsRUFBeUNBLEtBQXpDO0FBQ0gsU0FOTDtBQU9ILEtBdEJZOztBQXdCYkMsVUFBTSxVQUFTbkIsRUFBVCxFQUFhQyxVQUFiLEVBQXlCTyxHQUF6QixFQUE2QjtBQUMvQlIsV0FBR0MsVUFBSCxDQUFjQSxVQUFkLEVBQTBCTyxHQUExQixDQUE4QkEsR0FBOUIsRUFBbUNMLEdBQW5DLEdBQ0tDLElBREwsQ0FDVSxVQUFTSSxHQUFULEVBQWM7QUFDcEIsZ0JBQUlBLElBQUlZLE1BQVIsRUFBZ0I7QUFDWlgsd0JBQVFDLEdBQVIsQ0FBWSxnQkFBWixFQUE4QkYsSUFBSUksSUFBSixFQUE5QjtBQUNILGFBRkQsTUFFTztBQUNISCx3QkFBUUMsR0FBUixDQUFZLG1CQUFaO0FBQ0g7QUFDQSxTQVBMLEVBT09PLEtBUFAsQ0FPYSxVQUFTQyxLQUFULEVBQWdCO0FBQ3JCVCxvQkFBUUMsR0FBUixDQUFZLHlCQUFaLEVBQXVDUSxLQUF2QztBQUNILFNBVEw7QUFVSCxLQW5DWTs7QUFxQ2JHLFlBQVEsVUFBU3JCLEVBQVQsRUFBYUMsVUFBYixFQUF5Qk8sR0FBekIsRUFBOEJJLElBQTlCLEVBQW9DO0FBQ3hDLFlBQUlVLFdBQVd0QixHQUFHQyxVQUFILENBQWNBLFVBQWQsRUFBMEJPLEdBQTFCLENBQThCQSxHQUE5QixDQUFmO0FBQ0EsZUFBT1IsR0FBR3VCLGNBQUgsQ0FBa0IsVUFBU0MsV0FBVCxFQUFzQjtBQUMzQyxtQkFBT0EsWUFBWXJCLEdBQVosQ0FBZ0JtQixRQUFoQixFQUEwQmxCLElBQTFCLENBQStCLFVBQVNxQixLQUFULEVBQWdCO0FBQ2xELG9CQUFJLENBQUNBLE1BQU1MLE1BQVgsRUFBbUI7QUFDZiwwQkFBTSwwQkFBTjtBQUNIO0FBQ0RJLDRCQUFZSCxNQUFaLENBQW1CQyxRQUFuQixFQUE2QlYsSUFBN0I7QUFDSCxhQUxNLENBQVA7QUFNSCxTQVBNLEVBT0pSLElBUEksQ0FPQyxZQUFXO0FBQ2ZLLG9CQUFRQyxHQUFSLENBQVkscUNBQVo7QUFDSCxTQVRNLEVBU0pPLEtBVEksQ0FTRSxVQUFTQyxLQUFULEVBQWdCO0FBQ3JCVCxvQkFBUUMsR0FBUixDQUFZLHNCQUFaLEVBQW9DUSxLQUFwQztBQUNILFNBWE0sQ0FBUDtBQVlILEtBbkRZOztBQXFEYlEsWUFBUSxVQUFTMUIsRUFBVCxFQUFhQyxVQUFiLEVBQXlCTyxHQUF6QixFQUE4QjtBQUNsQ1IsV0FBR0MsVUFBSCxDQUFjQSxVQUFkLEVBQTBCTyxHQUExQixDQUE4QkEsR0FBOUIsRUFBbUNtQixNQUFuQyxHQUE0Q3ZCLElBQTVDLENBQWlELFlBQVc7QUFDcERLLG9CQUFRQyxHQUFSLENBQVksZ0NBQVo7QUFDSCxTQUZMLEVBRU9PLEtBRlAsQ0FFYSxVQUFTQyxLQUFULEVBQWdCO0FBQ3JCVCxvQkFBUVMsS0FBUixDQUFjLDJCQUFkLEVBQTJDQSxLQUEzQztBQUNILFNBSkw7QUFLSDs7QUEzRFksQ0FBakIiLCJmaWxlIjoiY3J1ZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG4vLyBDUlVEXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgICBsaXN0OiBmdW5jdGlvbihkYiwgY29sbGVjdGlvbiwgcXVlcnkpIHtcbiAgICAgICAgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5nZXQoKVxuICAgICAgICAgICAgLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgICAgICAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7ZG9jLmlkfSA9PiAke2RvYy5kYXRhKCl9YCk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goZG9jLmRhdGEoKSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKGRiLCBjb2xsZWN0aW9uLCBkYXRhKXtcbiAgICAgICAgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5hZGQoZGF0YSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvY1JlZikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRG9jdW1lbnQgd3JpdHRlbiB3aXRoIElEOiBcIiwgZG9jUmVmLmlkKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIGRvY3VtZW50OiBcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlYWQ6IGZ1bmN0aW9uKGRiLCBjb2xsZWN0aW9uLCBkb2Mpe1xuICAgICAgICBkYi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pLmRvYyhkb2MpLmdldCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkb2MpIHtcbiAgICAgICAgICAgIGlmIChkb2MuZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEb2N1bWVudCBkYXRhOlwiLCBkb2MuZGF0YSgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBzdWNoIGRvY3VtZW50IVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBnZXR0aW5nIGRvY3VtZW50OlwiLCBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbihkYiwgY29sbGVjdGlvbiwgZG9jLCBkYXRhKSB7XG4gICAgICAgIHZhciBzZkRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oY29sbGVjdGlvbikuZG9jKGRvYyk7XG4gICAgICAgIHJldHVybiBkYi5ydW5UcmFuc2FjdGlvbihmdW5jdGlvbih0cmFuc2FjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uLmdldChzZkRvY1JlZikudGhlbihmdW5jdGlvbihzZkRvYykge1xuICAgICAgICAgICAgICAgIGlmICghc2ZEb2MuZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwiRG9jdW1lbnQgZG9lcyBub3QgZXhpc3QhXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnVwZGF0ZShzZkRvY1JlZiwgZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVHJhbnNhY3Rpb24gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZCFcIik7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRyYW5zYWN0aW9uIGZhaWxlZDogXCIsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlbW92ZTogZnVuY3Rpb24oZGIsIGNvbGxlY3Rpb24sIGRvYykge1xuICAgICAgICBkYi5jb2xsZWN0aW9uKGNvbGxlY3Rpb24pLmRvYyhkb2MpLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEb2N1bWVudCBzdWNjZXNzZnVsbHkgZGVsZXRlZCFcIik7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZW1vdmluZyBkb2N1bWVudDogXCIsIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxufSJdfQ==