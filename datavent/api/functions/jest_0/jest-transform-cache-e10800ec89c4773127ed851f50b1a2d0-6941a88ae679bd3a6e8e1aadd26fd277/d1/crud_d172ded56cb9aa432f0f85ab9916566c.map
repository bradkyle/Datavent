{"version":3,"sources":["crud.js"],"names":["module","exports","list","db","collection","query","get","then","querySnapshot","items","forEach","doc","console","log","id","data","push","create","add","docRef","catch","error","read","exists","update","sfDocRef","runTransaction","transaction","sfDoc","remove","delete"],"mappings":";;AAEA;AACA;;AAEAA,OAAOC,OAAP,GAAiB;;AAEbC,UAAM,UAASC,EAAT,EAAaC,UAAb,EAAyBC,KAAzB,EAAgC;AAClCF,WAAGC,UAAH,CAAcA,UAAd,EAA0BE,GAA1B,GACKC,IADL,CACWC,aAAD,IAAmB;AACrB,kBAAMC,QAAQ,EAAd;AACAD,0BAAcE,OAAd,CAAuBC,GAAD,IAAS;AAC3BC,wBAAQC,GAAR,CAAa,GAAEF,IAAIG,EAAG,OAAMH,IAAII,IAAJ,EAAW,EAAvC;AACAN,sBAAMO,IAAN,CAAWL,IAAII,IAAJ,EAAX;AACH,aAHD;AAIA,mBAAON,KAAP;AACH,SARL;AASH,KAZY;;AAcbQ,YAAQ,UAASd,EAAT,EAAaC,UAAb,EAAyBW,IAAzB,EAA8B;AAClCZ,WAAGC,UAAH,CAAcA,UAAd,EAA0Bc,GAA1B,CAA8BH,IAA9B,EACKR,IADL,CACU,UAASY,MAAT,EAAiB;AACnBP,oBAAQC,GAAR,CAAY,4BAAZ,EAA0CM,OAAOL,EAAjD;AACH,SAHL,EAIKM,KAJL,CAIW,UAASC,KAAT,EAAgB;AACnBT,oBAAQS,KAAR,CAAc,yBAAd,EAAyCA,KAAzC;AACH,SANL;AAOH,KAtBY;;AAwBbC,UAAM,UAASnB,EAAT,EAAaC,UAAb,EAAyBO,GAAzB,EAA6B;AAC/BR,WAAGC,UAAH,CAAcA,UAAd,EAA0BO,GAA1B,CAA8BA,GAA9B,EAAmCL,GAAnC,GACKC,IADL,CACU,UAASI,GAAT,EAAc;AACpB,gBAAIA,IAAIY,MAAR,EAAgB;AACZX,wBAAQC,GAAR,CAAY,gBAAZ,EAA8BF,IAAII,IAAJ,EAA9B;AACH,aAFD,MAEO;AACHH,wBAAQC,GAAR,CAAY,mBAAZ;AACH;AACA,SAPL,EAOOO,KAPP,CAOa,UAASC,KAAT,EAAgB;AACrBT,oBAAQC,GAAR,CAAY,yBAAZ,EAAuCQ,KAAvC;AACH,SATL;AAUH,KAnCY;;AAqCbG,YAAQ,UAASrB,EAAT,EAAaC,UAAb,EAAyBO,GAAzB,EAA8BI,IAA9B,EAAoC;AACxC,YAAIU,WAAWtB,GAAGC,UAAH,CAAcA,UAAd,EAA0BO,GAA1B,CAA8BA,GAA9B,CAAf;AACA,eAAOR,GAAGuB,cAAH,CAAkB,UAASC,WAAT,EAAsB;AAC3C,mBAAOA,YAAYrB,GAAZ,CAAgBmB,QAAhB,EAA0BlB,IAA1B,CAA+B,UAASqB,KAAT,EAAgB;AAClD,oBAAI,CAACA,MAAML,MAAX,EAAmB;AACf,0BAAM,0BAAN;AACH;AACDI,4BAAYH,MAAZ,CAAmBC,QAAnB,EAA6BV,IAA7B;AACH,aALM,CAAP;AAMH,SAPM,EAOJR,IAPI,CAOC,YAAW;AACfK,oBAAQC,GAAR,CAAY,qCAAZ;AACH,SATM,EASJO,KATI,CASE,UAASC,KAAT,EAAgB;AACrBT,oBAAQC,GAAR,CAAY,sBAAZ,EAAoCQ,KAApC;AACH,SAXM,CAAP;AAYH,KAnDY;;AAqDbQ,YAAQ,UAAS1B,EAAT,EAAaC,UAAb,EAAyBO,GAAzB,EAA8B;AAClCR,WAAGC,UAAH,CAAcA,UAAd,EAA0BO,GAA1B,CAA8BA,GAA9B,EAAmCmB,MAAnC,GAA4CvB,IAA5C,CAAiD,YAAW;AACpDK,oBAAQC,GAAR,CAAY,gCAAZ;AACH,SAFL,EAEOO,KAFP,CAEa,UAASC,KAAT,EAAgB;AACrBT,oBAAQS,KAAR,CAAc,2BAAd,EAA2CA,KAA3C;AACH,SAJL;AAKH;;AA3DY,CAAjB","file":"crud.js","sourcesContent":["\n\n// CRUD\n// -------------------------------------------->\n\nmodule.exports = {\n\n    list: function(db, collection, query) {\n        db.collection(collection).get()\n            .then((querySnapshot) => {\n                const items = []\n                querySnapshot.forEach((doc) => {\n                    console.log(`${doc.id} => ${doc.data()}`);\n                    items.push(doc.data())\n                });\n                return items\n            });\n    },\n\n    create: function(db, collection, data){\n        db.collection(collection).add(data)\n            .then(function(docRef) {\n                console.log(\"Document written with ID: \", docRef.id);\n            })\n            .catch(function(error) {\n                console.error(\"Error adding document: \", error);\n            });\n    },\n\n    read: function(db, collection, doc){\n        db.collection(collection).doc(doc).get()\n            .then(function(doc) {\n            if (doc.exists) {\n                console.log(\"Document data:\", doc.data());\n            } else {\n                console.log(\"No such document!\");\n            }\n            }).catch(function(error) {\n                console.log(\"Error getting document:\", error);\n            });\n    },\n\n    update: function(db, collection, doc, data) {\n        var sfDocRef = db.collection(collection).doc(doc);\n        return db.runTransaction(function(transaction) {\n            return transaction.get(sfDocRef).then(function(sfDoc) {\n                if (!sfDoc.exists) {\n                    throw \"Document does not exist!\";\n                }\n                transaction.update(sfDocRef, data);\n            });\n        }).then(function() {\n            console.log(\"Transaction successfully committed!\");\n        }).catch(function(error) {\n            console.log(\"Transaction failed: \", error);\n        });\n    },\n\n    remove: function(db, collection, doc) {\n        db.collection(collection).doc(doc).delete().then(function() {\n                console.log(\"Document successfully deleted!\");\n            }).catch(function(error) {\n                console.error(\"Error removing document: \", error);\n            });\n    }\n\n}"]}